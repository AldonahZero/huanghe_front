# èœå•é®æŒ¡é—®é¢˜ä¿®å¤è¯´æ˜

## ğŸ› é—®é¢˜æè¿°

**åŸå§‹é—®é¢˜**: ä¾§è¾¹æ èœå•å³ä½¿åœ¨æ”¶èµ·çŠ¶æ€ä¸‹,ä¹Ÿä¼šé˜»æ­¢é¡µé¢å…¶ä»–å…ƒç´ çš„ç‚¹å‡»ã€ç„¦ç‚¹ç­‰äº¤äº’äº‹ä»¶ã€‚

**æ ¹æœ¬åŸå› **: 
1. `.staggered-menu-wrapper` è®¾ç½®äº† `width: 100%`, `height: 100%`, `z-index: 40`
2. å³ä½¿èœå•è§†è§‰ä¸Šç§»å‡ºå±å¹•,DOM å…ƒç´ ä»ç„¶å æ®æ•´ä¸ªé¡µé¢ç©ºé—´
3. é«˜ z-index å¯¼è‡´å®ƒè¦†ç›–åœ¨å…¶ä»–å†…å®¹ä¹‹ä¸Š,é˜»æ­¢äº†ç‚¹å‡»äº‹ä»¶ä¼ é€’

## âœ… è§£å†³æ–¹æ¡ˆ

ä½¿ç”¨ `pointer-events` CSS å±æ€§æ¥æ§åˆ¶å…ƒç´ æ˜¯å¦å“åº”é¼ æ ‡äº‹ä»¶:

### 1. èœå•åŒ…è£…å™¨é»˜è®¤ä¸å“åº”ç‚¹å‡»
```css
.staggered-menu-wrapper {
  pointer-events: none; /* é»˜è®¤ä¸å“åº”ç‚¹å‡»äº‹ä»¶ */
}

.staggered-menu-wrapper.fixed-wrapper {
  pointer-events: none; /* å›ºå®šå®šä½æ—¶ä¹Ÿä¸å“åº” */
}
```

### 2. èœå•æ‰“å¼€æ—¶æ¢å¤å“åº”
```css
.staggered-menu-wrapper[data-open] {
  pointer-events: auto; /* æ‰“å¼€æ—¶å…è®¸äº¤äº’ */
}
```

### 3. èœå•é¢æ¿é»˜è®¤ä¸å“åº”
```css
.staggered-menu-panel {
  pointer-events: none; /* é»˜è®¤ä¸å“åº” */
}

[data-open] .staggered-menu-panel {
  pointer-events: auto; /* æ‰“å¼€æ—¶å¯äº¤äº’ */
}
```

### 4. Header å’ŒæŒ‰é’®å§‹ç»ˆå¯ç‚¹å‡»
```css
.staggered-menu-header {
  pointer-events: none; /* header æœ¬èº«ä¸é˜»æŒ¡ */
}

.staggered-menu-header > * {
  pointer-events: auto; /* ä½†å­å…ƒç´ (æŒ‰é’®ã€logo)å¯ç‚¹å‡» */
}
```

## ğŸ¯ å·¥ä½œåŸç†

```
å…³é—­çŠ¶æ€:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ .staggered-menu-wrapper             â”‚ â† pointer-events: none (ä¸é˜»æŒ¡)
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚ .staggered-menu-headerâ”‚          â”‚ â† pointer-events: none
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚          â”‚
â”‚  â”‚   â”‚ æŒ‰é’®      â”‚        â”‚          â”‚ â† pointer-events: auto (å¯ç‚¹å‡»)
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                      â”‚
â”‚  [èœå•é¢æ¿åœ¨å±å¹•å¤–]                   â”‚ â† pointer-events: none
â”‚                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
é¡µé¢å…¶ä»–å†…å®¹å¯ä»¥æ­£å¸¸ç‚¹å‡» âœ…

æ‰“å¼€çŠ¶æ€:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ .staggered-menu-wrapper (data-open) â”‚ â† pointer-events: auto
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚ .staggered-menu-headerâ”‚          â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚          â”‚
â”‚  â”‚   â”‚ æŒ‰é’®      â”‚        â”‚          â”‚ â† å¯ç‚¹å‡»å…³é—­
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                      â”‚
â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚            â”‚ èœå•é¢æ¿      â”‚         â”‚ â† pointer-events: auto
â”‚            â”‚ â€¢ é¡¹ç›®1       â”‚         â”‚ â† æ‰€æœ‰èœå•é¡¹å¯ç‚¹å‡»
â”‚            â”‚ â€¢ é¡¹ç›®2       â”‚         â”‚
â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
èœå•å¯äº¤äº’,èƒŒæ™¯ä¸å¯ç‚¹å‡»(ç¬¦åˆé¢„æœŸ) âœ…
```

## ğŸ§ª æµ‹è¯•éªŒè¯

### æµ‹è¯•æ­¥éª¤:

1. **æµ‹è¯•å…³é—­çŠ¶æ€**
   - ç¡®ä¿èœå•æŒ‰é’®å¯ä»¥ç‚¹å‡»
   - ç¡®ä¿é¡µé¢å…¶ä»–æŒ‰é’®å’Œé“¾æ¥å¯ä»¥ç‚¹å‡»
   - ç¡®ä¿å¯ä»¥é€‰ä¸­é¡µé¢æ–‡æœ¬
   - ç¡®ä¿è¾“å…¥æ¡†å¯ä»¥è·å¾—ç„¦ç‚¹

2. **æµ‹è¯•æ‰“å¼€çŠ¶æ€**
   - ç‚¹å‡»èœå•æŒ‰é’®,èœå•åº”è¯¥æ‰“å¼€
   - èœå•é¡¹åº”è¯¥å¯ä»¥ç‚¹å‡»
   - ç‚¹å‡»èœå•å¤–çš„åŒºåŸŸ(å¦‚æœéœ€è¦å…³é—­åŠŸèƒ½,éœ€è¦é¢å¤–å®ç°)

3. **æµ‹è¯•æ‰“å¼€åå…³é—­**
   - ç‚¹å‡»å…³é—­æŒ‰é’®,èœå•åº”è¯¥å…³é—­
   - èœå•å…³é—­å,é¡µé¢å…¶ä»–å†…å®¹åº”è¯¥ç«‹å³å¯ä»¥äº¤äº’

### æ£€æŸ¥æ¸…å•:

- [ ] èœå•å…³é—­æ—¶,æŒ‰é’®å¯ç‚¹å‡» âœ…
- [ ] èœå•å…³é—­æ—¶,é¡µé¢å†…å®¹å¯äº¤äº’ âœ…
- [ ] èœå•æ‰“å¼€æ—¶,æŒ‰é’®ä»å¯ç‚¹å‡»(å…³é—­åŠŸèƒ½) âœ…
- [ ] èœå•æ‰“å¼€æ—¶,èœå•é¡¹å¯ç‚¹å‡» âœ…
- [ ] åŠ¨ç”»æµç•…,æ— é—ªçƒ âœ…
- [ ] åœ¨ä¸åŒå±å¹•å°ºå¯¸ä¸‹æ­£å¸¸å·¥ä½œ âœ…

## ğŸ“ æŠ€æœ¯è¯´æ˜

### `pointer-events` å±æ€§è¯´æ˜:

- **`pointer-events: none`**: 
  - å…ƒç´ æ°¸è¿œä¸ä¼šæˆä¸ºé¼ æ ‡äº‹ä»¶çš„ç›®æ ‡
  - é¼ æ ‡äº‹ä»¶ä¼š"ç©¿é€"è¯¥å…ƒç´ ,ä¼ é€’ç»™ä¸‹å±‚å…ƒç´ 
  - ä¸å½±å“å­å…ƒç´ çš„ pointer-events è®¾ç½®

- **`pointer-events: auto`**: 
  - é»˜è®¤å€¼,å…ƒç´ æ­£å¸¸å“åº”é¼ æ ‡äº‹ä»¶

- **ç»§æ‰¿ç‰¹æ€§**:
  - å­å…ƒç´ å¯ä»¥è¦†ç›–çˆ¶å…ƒç´ çš„ `pointer-events` è®¾ç½®
  - è¿™å…è®¸æˆ‘ä»¬è®©æ•´ä¸ªèœå•åŒºåŸŸ `pointer-events: none`,ä½†è®©æŒ‰é’® `pointer-events: auto`

### ä¸ºä»€ä¹ˆä¸ç”¨ `visibility` æˆ– `display`?

1. **`visibility: hidden`**: ä¼šå½±å“ GSAP åŠ¨ç”»
2. **`display: none`**: ä¼šç ´ååŠ¨ç”»æ•ˆæœ,å…ƒç´ æ— æ³•å¹³æ»‘è¿‡æ¸¡
3. **`pointer-events`**: å®Œç¾æ–¹æ¡ˆ
   - ä¸å½±å“å¸ƒå±€
   - ä¸å½±å“åŠ¨ç”»
   - åªæ§åˆ¶äº¤äº’è¡Œä¸º

## ğŸ”„ ç›¸å…³ä¿®æ”¹

### ä¿®æ”¹çš„æ–‡ä»¶:
- `components/StaggeredMenu.css`

### æ·»åŠ çš„ CSS è§„åˆ™:
1. `.staggered-menu-wrapper` - æ·»åŠ  `pointer-events: none`
2. `.staggered-menu-wrapper.fixed-wrapper` - æ·»åŠ  `pointer-events: none`
3. `.staggered-menu-wrapper[data-open]` - æ·»åŠ  `pointer-events: auto`
4. `.staggered-menu-panel` - æ·»åŠ  `pointer-events: none`
5. `[data-open] .staggered-menu-panel` - æ·»åŠ  `pointer-events: auto`
6. `.sm-prelayer` - æ·»åŠ  `pointer-events: none`

### æœªä¿®æ”¹çš„éƒ¨åˆ†:
- TypeScript ç»„ä»¶ä»£ç  (StaggeredMenu.tsx) - æ— éœ€ä¿®æ”¹
- åŠ¨ç”»é€»è¾‘ - ä¿æŒä¸å˜
- GSAP æ—¶é—´çº¿ - ä¿æŒä¸å˜

## ğŸ’¡ æ‰©å±•å»ºè®®

å¦‚æœéœ€è¦å®ç°ç‚¹å‡»èœå•å¤–éƒ¨åŒºåŸŸå…³é—­èœå•,å¯ä»¥æ·»åŠ :

```tsx
// åœ¨ StaggeredMenu.tsx ä¸­æ·»åŠ 
const handleBackdropClick = useCallback(() => {
  if (openRef.current) {
    toggleMenu();
  }
}, [toggleMenu]);

// åœ¨ JSX ä¸­æ·»åŠ èƒŒæ™¯é®ç½©
{open && (
  <div 
    className="sm-backdrop" 
    onClick={handleBackdropClick}
    aria-hidden="true"
  />
)}
```

```css
/* åœ¨ StaggeredMenu.css ä¸­æ·»åŠ  */
.sm-backdrop {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.3);
  z-index: 5;
  cursor: pointer;
}
```

## âœ… æ€»ç»“

è¿™ä¸ªä¿®å¤é€šè¿‡ `pointer-events` CSS å±æ€§è§£å†³äº†èœå•é®æŒ¡é—®é¢˜:
- **å…³é—­æ—¶**: èœå•åŒºåŸŸå®Œå…¨é€æ˜äºé¼ æ ‡äº‹ä»¶,ä¸é˜»æŒ¡ä»»ä½•äº¤äº’
- **æ‰“å¼€æ—¶**: èœå•åŒºåŸŸæ¢å¤äº¤äº’,æŒ‰é’®å’Œèœå•é¡¹éƒ½å¯ä»¥ç‚¹å‡»
- **åŠ¨ç”»**: ä¸å—ä»»ä½•å½±å“,æµç•…å¦‚åˆ
- **æ€§èƒ½**: æ— é¢å¤– JavaScript å¼€é”€,çº¯ CSS è§£å†³æ–¹æ¡ˆ
